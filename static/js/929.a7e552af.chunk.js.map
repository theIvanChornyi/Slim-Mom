{"version":3,"file":"static/js/929.a7e552af.chunk.js","mappings":"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","sources":["components/SideBar/SideBar.styled.js","components/SideBar/SideBar.jsx","pages/User/User.styled.js","pages/User/User.jsx"],"sourcesContent":["import styled from 'styled-components';\nimport { breakpoints } from 'helpers/breakpoints';\nimport leaves from '../../helpers/images/leaves-aside-tablet.png';\nimport leavesBig from '../../helpers/images/leaves-desktop-aside.png';\n\nexport const AsideBox = styled.aside`\n  margin: 0 -20px;\n  background: ${p => p.theme.sideBarColor};\n  padding: 40px 20px;\n  min-width: 280px;\n  min-height: 433px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n\n  gap: 40px;\n\n  @media ${breakpoints.minTablet} {\n    margin: 0 -32px;\n    width: 100%;\n    min-height: 166px;\n    flex-direction: row;\n    align-items: flex-start;\n    justify-content: space-between;\n    padding: 80px 88px;\n    background-image: url(${leaves});\n    background-repeat: no-repeat;\n    background-position: top -180;\n  }\n\n  @media ${breakpoints.desktop} {\n    margin: 0 -32px;\n    background: ${p => p.theme.sideBarColor};\n\n    margin-left: auto;\n    gap: 60px;\n    padding: 0;\n    width: 497px;\n    height: 850px;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    background-image: url(${leavesBig});\n    background-repeat: no-repeat;\n    background-position: 0 -80%;\n    overflow: auto;\n  }\n`;\n\nexport const Title = styled.h2`\n  margin-bottom: 20px;\n\n  font-weight: 700;\n  font-size: 14px;\n  line-height: 17px;\n  letter-spacing: 0.04em;\n\n  color: #212121;\n\n  @media screen and (min-width: 1280px) {\n    margin-bottom: 38px;\n  }\n`;\n\nexport const Div = styled.div`\n  min-width: 280px;\n  max-width: 520px;\n\n  @media screen and (min-width: 768px) {\n    width: 244px;\n  }\n  @media screen and (min-width: 1280px) {\n    width: 290px;\n  }\n`;\n\nexport const KcalList = styled.ul`\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n`;\n\nexport const KcalItem = styled.li`\n  display: flex;\n  justify-content: space-between;\n`;\n\nexport const Text = styled.p`\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 17px;\n  letter-spacing: 0.04em;\n\n  color: #9b9faa;\n`;\n\nexport const Span = styled.span`\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 17px;\n  letter-spacing: 0.04em;\n\n  color: #9b9faa;\n`;\n\nexport const ProductList = styled.ul`\n  display: flex;\n  flex-direction: column;\n  max-height: 200px;\n  gap: 20px;\n  overflow-y: scroll;\n\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #e2e2e2;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: #264061;\n  }\n`;\n","import PropTypes from 'prop-types';\nimport {\n  AsideBox,\n  Div,\n  KcalItem,\n  KcalList,\n  ProductList,\n  Span,\n  Text,\n  Title,\n} from './SideBar.styled';\n\nexport default function SideBar({ date, dailyInfo, notAllowedProducts }) {\n  const { dailyRate, kcalConsumed, kcalLeft, percentsOfDailyRate, daySummary } =\n    dailyInfo;\n\n  const getPercentsKcal = percent => {\n    const total = dailyRate || daySummary?.dailyRate;\n\n    return Math.round((percent / 100) * total);\n  };\n\n  const normalLeft = Math.round(kcalLeft) || Math.round(daySummary?.kcalLeft);\n  const normalConsumed =\n    Math.round(kcalConsumed) || Math.round(daySummary?.kcalConsumed);\n  const normalPercent =\n    Math.round(percentsOfDailyRate) ||\n    Math.round(daySummary?.percentsOfDailyRate);\n  const normalPercentsKcal =\n    getPercentsKcal(percentsOfDailyRate) ||\n    getPercentsKcal(daySummary?.percentsOfDailyRate);\n\n  return (\n    <AsideBox>\n      <Div>\n        <Title>Summary for {date}</Title>\n        <KcalList>\n          <KcalItem>\n            <Text>Left</Text>\n            <Span>\n              {kcalLeft || daySummary ? normalLeft : '000'}\n              kcal\n            </Span>\n          </KcalItem>\n          <KcalItem>\n            <Text>Consumed</Text>\n            <Span>\n              {kcalConsumed || daySummary ? normalConsumed : '000'}\n              kcal\n            </Span>\n          </KcalItem>\n          <KcalItem>\n            <Text>Daily rate</Text>\n            <Span>\n              {dailyRate || daySummary\n                ? dailyRate || daySummary.dailyRate\n                : '000'}\n              kcal\n            </Span>\n          </KcalItem>\n          <KcalItem>\n            <Text>\n              {percentsOfDailyRate || daySummary ? normalPercent : 'n'}% of\n              normal\n            </Text>\n            <Span>\n              {percentsOfDailyRate || daySummary ? normalPercentsKcal : '000'}\n              kcal\n            </Span>\n          </KcalItem>\n        </KcalList>\n      </Div>\n      <Div>\n        <Title>Food not recommended</Title>\n        <ProductList>\n          {notAllowedProducts ? (\n            notAllowedProducts?.map(product => (\n              <KcalItem key={product}>\n                <Text>{product}</Text>\n              </KcalItem>\n            ))\n          ) : (\n            <KcalItem>\n              <Text>Your diet will be displayed here</Text>\n            </KcalItem>\n          )}\n        </ProductList>\n      </Div>\n    </AsideBox>\n  );\n}\n\nSideBar.propTypes = {\n  date: PropTypes.string,\n  dailyInfo: PropTypes.shape({\n    date: PropTypes.string,\n    daySummary: PropTypes.shape({\n      dailyRate: PropTypes.number,\n      date: PropTypes.string,\n      id: PropTypes.string,\n      kcalConsumed: PropTypes.number,\n      kcalLeft: PropTypes.number,\n      percentsOfDailyRate: PropTypes.number,\n      userId: PropTypes.string,\n    }),\n    eatenProducts: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.string,\n        kcal: PropTypes.number,\n        title: PropTypes.string,\n        weight: PropTypes.number,\n      })\n    ),\n    id: PropTypes.string,\n  }),\n  notAllowedProducts: PropTypes.arrayOf(PropTypes.string),\n};\n","import styled from 'styled-components';\nimport { breakpoints } from 'helpers/breakpoints';\n\nexport const UserPage = styled.section`\n  min-width: 320px;\n  background: ${p =>\n    p.theme.gradient\n      ? `linear-gradient(\n        180deg,\n        rgba(255, 255, 255, 1) 50%,\n        rgba(240, 241, 243, 1) 50%\n      )`\n      : `linear-gradient(\n        180deg,\n        rgba(22,\t81,\t129, 0.3) 50%,\n        #165181 50%\n      )`};\n\n  @media ${breakpoints.minTablet} {\n    background: ${p =>\n      p.theme.gradient\n        ? `linear-gradient(\n        180deg,\n        rgba(255, 255, 255, 1) 63%,\n        rgba(240, 241, 243, 1) 63%\n      )`\n        : `linear-gradient(\n        180deg,\n        rgba(22,\t81,\t129, 0.3) 63%,\n        #165181 63%\n      )`};\n  }\n\n  @media ${breakpoints.desktop} {\n    height: 100vh;\n    background: transparent;\n  }\n`;\n\nexport const UserWrapper = styled.section`\n  display: flex;\n  flex-direction: column;\n\n  @media ${breakpoints.desktop} {\n    flex-direction: row;\n  }\n`;\n","import { Container } from 'components/Container';\r\nimport { Outlet, useSearchParams } from 'react-router-dom';\r\nimport SideBar from 'components/SideBar';\r\nimport { UserPage, UserWrapper } from './User.styled';\r\nimport { Suspense, useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport APIs from 'services/API/API';\r\nimport { toast } from 'react-toastify';\r\nimport Loader from 'components/Loader';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectSlimDaddy } from 'redux/slimDaddy/selectors.slimDaddy';\r\n\r\nconst TODAY = new Date().toLocaleDateString('en-CA');\r\n\r\nexport default function User() {\r\n  const [searchParams] = useSearchParams();\r\n  const date = searchParams.get('date') || TODAY;\r\n  const normalizedDate = new Date(date)\r\n    .toLocaleDateString('en-GB')\r\n    .replaceAll('/', '.');\r\n\r\n  const { userId } = useParams();\r\n  const isDaddy = useSelector(selectSlimDaddy);\r\n\r\n  const usersParams = JSON.parse(window.localStorage.getItem('userParams'));\r\n\r\n  const [dailyRate, setDailyRate] = useState({});\r\n  const [notAllowedProducts, setNotAllowedProducts] = useState([]);\r\n  const [userData, setUserData] = useState({});\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  userData && toast.warn(errorMessage);\r\n\r\n  useEffect(() => {\r\n    getInfoSideBar(\r\n      setDailyRate,\r\n      setErrorMessage,\r\n      setNotAllowedProducts,\r\n      setUserData,\r\n      date,\r\n      userId,\r\n      usersParams\r\n    );\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [date, userId]);\r\n\r\n  useEffect(() => {\r\n    getAllowedProducts(setUserData, setNotAllowedProducts, setErrorMessage);\r\n  }, []);\r\n  return (\r\n    <UserPage isDaddy={isDaddy}>\r\n      <Container>\r\n        {userData?.notAllowedProducts ? (\r\n          <UserWrapper>\r\n            <Suspense fallback={<Loader />}>\r\n              <Outlet\r\n                context={{\r\n                  userData,\r\n                  setNotAllowedProducts,\r\n                  dailyRate,\r\n                  setDailyRate,\r\n                }}\r\n              />\r\n            </Suspense>\r\n\r\n            <SideBar\r\n              date={normalizedDate}\r\n              dailyInfo={dailyRate}\r\n              notAllowedProducts={notAllowedProducts}\r\n            />\r\n          </UserWrapper>\r\n        ) : (\r\n          <Loader />\r\n        )}\r\n      </Container>\r\n    </UserPage>\r\n  );\r\n}\r\n\r\nasync function getAllowedProducts(\r\n  setUserData,\r\n  setNotAllowedProducts,\r\n  setErrorMessage\r\n) {\r\n  try {\r\n    window.localStorage.removeItem('userParams');\r\n    const { data } = await APIs.getUserInfoRequest();\r\n    setErrorMessage(null);\r\n    setUserData(data.userData);\r\n    setNotAllowedProducts(data.userData.notAllowedProducts);\r\n  } catch (error) {\r\n    const message = error?.response?.data?.message;\r\n    setErrorMessage(message);\r\n  }\r\n}\r\n\r\nasync function getInfoSideBar(\r\n  setDailyRate,\r\n  setErrorMessage,\r\n  setNotAllowedProducts,\r\n  setUserData,\r\n  date,\r\n  userId,\r\n  usersParams\r\n) {\r\n  try {\r\n    const { data } = await APIs.getInfoForDayRequest({ date });\r\n    setDailyRate(data);\r\n    setErrorMessage(null);\r\n  } catch (error) {\r\n    if (\r\n      error.response.data.message === 'Please, count your daily rate first' &&\r\n      usersParams\r\n    ) {\r\n      setErrorMessage(null);\r\n      setUserData(usersParams);\r\n      getRequestWithSaved(\r\n        userId,\r\n        usersParams,\r\n        setDailyRate,\r\n        setNotAllowedProducts,\r\n        setErrorMessage\r\n      );\r\n    } else {\r\n      setErrorMessage(error.response.data.message);\r\n    }\r\n  }\r\n}\r\n\r\nasync function getRequestWithSaved(\r\n  userId,\r\n  usersParams,\r\n  setDailyRate,\r\n  setNotAllowedProducts,\r\n  setErrorMessage\r\n) {\r\n  try {\r\n    const { data } = await APIs.calculateDaylyAuthRequest(userId, usersParams);\r\n    setDailyRate({ dailyRate: data.dailyRate, kcalLeft: data.dailyRate });\r\n    setNotAllowedProducts(data.notAllowedProducts);\r\n    setErrorMessage(null);\r\n    window.localStorage.removeItem('userParams');\r\n  } catch (error) {\r\n    const message = error?.response?.data?.message;\r\n    setErrorMessage(message);\r\n  }\r\n}\r\n"],"names":["AsideBox","styled","p","theme","sideBarColor","breakpoints","leaves","leavesBig","Title","Div","KcalList","KcalItem","Text","Span","ProductList","SideBar","date","dailyInfo","notAllowedProducts","dailyRate","kcalConsumed","kcalLeft","percentsOfDailyRate","daySummary","getPercentsKcal","percent","total","Math","round","normalLeft","normalConsumed","normalPercent","normalPercentsKcal","map","product","UserPage","gradient","UserWrapper","TODAY","Date","toLocaleDateString","User","useSearchParams","get","normalizedDate","replaceAll","userId","useParams","isDaddy","useSelector","selectSlimDaddy","usersParams","JSON","parse","window","localStorage","getItem","useState","setDailyRate","setNotAllowedProducts","userData","setUserData","errorMessage","setErrorMessage","toast","useEffect","getInfoSideBar","getAllowedProducts","Container","Suspense","fallback","Loader","context","removeItem","APIs","data","message","response","getRequestWithSaved"],"sourceRoot":""}